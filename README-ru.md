<p align="center">
  <a href="https://github.com/gozargah/marzban" target="_blank" rel="noopener noreferrer">
    <picture>
      <source media="(prefers-color-scheme: dark)" srcset="https://github.com/Gozargah/Marzban-docs/raw/master/screenshots/logo-dark.png">
      <img width="160" height="160" src="https://github.com/Gozargah/Marzban-docs/raw/master/screenshots/logo-light.png">
    </picture>
  </a>
</p>

<h1 align="center"/>Marzban</h1>

<p align="center">
    –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, —É—Å—Ç–æ–π—á–∏–≤–æ–µ –∫ —Ü–µ–Ω–∑—É—Ä–µ, –Ω–∞ –±–∞–∑–µ <a href="https://github.com/XTLS/Xray-core">Xray</a>
</p>

<br/>
<p align="center">
    <a href="#">
        <img src="https://img.shields.io/github/actions/workflow/status/gozargah/marzban/build.yml?style=flat-square" />
    </a>
    <a href="https://hub.docker.com/r/gozargah/marzban" target="_blank">
        <img src="https://img.shields.io/docker/pulls/gozargah/marzban?style=flat-square&logo=docker" />
    </a>
    <a href="#">
        <img src="https://img.shields.io/github/license/gozargah/marzban?style=flat-square" />
    </a>
    <a href="https://t.me/gozargah_marzban" target="_blank">
        <img src="https://img.shields.io/badge/telegram-group-blue?style=flat-square&logo=telegram" />
    </a>
    <a href="#">
        <img src="https://img.shields.io/badge/twitter-commiunity-blue?style=flat-square&logo=twitter" />
    </a>
    <a href="#">
        <img src="https://img.shields.io/github/stars/gozargah/marzban?style=social" />
    </a>
</p>

<p align="center">
 <a href="./README.md">
 English
 </a>
 /
 <a href="./README-fa.md">
 ŸÅÿßÿ±ÿ≥€å
 </a>
  /
  <a href="./README-zh-cn.md">
 ÁÆÄ‰Ωì‰∏≠Êñá
 </a>
   /
  <a href="./README-ru.md">
 –†—É—Å—Å–∫–∏–π
 </a>
</p>

<p align="center">
  <a href="https://github.com/gozargah/marzban" target="_blank" rel="noopener noreferrer" >
    <img src="https://github.com/Gozargah/Marzban-docs/raw/master/screenshots/preview.png" alt="Marzban screenshots" width="600" height="auto">
  </a>
</p>

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
  - [–ü–æ—á–µ–º—É Marzban?](#–ø–æ—á–µ–º—É-marzban)
    - [–§—É–Ω–∫—Ü–∏–∏](#—Ñ—É–Ω–∫—Ü–∏–∏)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ](#—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ-–ø–æ-—É—Å—Ç–∞–Ω–æ–≤–∫–µ)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [API](#api)
- [Backup](#backup)
- [Telegram Bot](#telegram-bot)
- [Marzban CLI](#marzban-cli)
- [Marzban Node](#marzban-node)
- [Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è](#webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- [–ü–æ–¥–¥–µ—Ä–∂–∫–∞](#–ø–æ–¥–¥–µ—Ä–∂–∫–∞)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)
- [–£—á–∞—Å—Ç–Ω–∏–∫–∏](#—É—á–∞—Å—Ç–Ω–∏–∫–∏)

# –í–≤–µ–¥–µ–Ω–∏–µ

Marzban (–ü–µ—Ä—Å–∏–¥—Å–∫–æ–µ —Å–ª–æ–≤–æ "–ü–æ–≥—Ä–∞–Ω–∏—á–Ω–∏–∫" - –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—Å—è /m√¶rz'ban/) ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∏ —É–¥–æ–±–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç–Ω—è–º–∏ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –ø—Ä–æ–∫—Å–∏ –Ω–∞ –±–∞–∑–µ [Xray-core](https://github.com/XTLS/Xray-core) –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Python –∏ ReactJS.

## –ü–æ—á–µ–º—É Marzban?

Marzban —É–¥–æ–±–µ–Ω –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏, –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –Ω–∞–¥–µ–∂–µ–Ω. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–æ–∫—Å–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –° –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –§—É–Ω–∫—Ü–∏–∏

- –ì–æ—Ç–æ–≤—ã–π **Web UI**
- **REST API** –±—ç–∫—ç–Ω–¥
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ [**–º–Ω–æ–∂–µ—Å—Ç–≤–∞ —É–∑–ª–æ–≤**](#marzban-node) (–¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ **Vmess**, **VLESS**, **Trojan** –∏ **Shadowsocks**
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ **–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –Ω–∞ –æ–¥–Ω–æ–º inbound
- **–ù–µ—Å–∫–æ–ª—å–∫–æ inbound** –Ω–∞ **–æ–¥–Ω–æ–º –ø–æ—Ä—Ç—É** (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ fallbacks)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ **–∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç—Ä–∞—Ñ–∏–∫–∞** –∏ **—Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è**
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ **–ø–µ—Ä–∏–æ–¥–∞–º** (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤—ã–¥–∞–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –¥–µ–Ω—å, –Ω–µ–¥–µ–ª—é –∏ —Ç. –¥.)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **—Å—Å—ã–ª–æ–∫-–ø–æ–¥–ø–∏—Å–æ–∫** —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö —Å **V2ray** _(—Ç–∞–∫–∏–µ –∫–∞–∫ V2RayNG, OneClick, Nekoray, –∏ –¥—Ä.)_, **Clash** –∏ **ClashMeta**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è **–°—Å—ã–ª–æ–∫** –∏ **QRcode** 
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞ –∏ **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ xray
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **TLS** –∏ **REALITY** 
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π **Telegram Bot**
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π **Command Line Interface (CLI)**
- **–ù–µ—Å–∫–æ–ª—å–∫–æ —è–∑—ã–∫–æ–≤**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–ù–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤** (WIP)

# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –±—ã—Å—Ç—Ä—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã:

```bash
sudo bash -c "$(curl -sL https://github.com/Gozargah/Marzban-scripts/raw/master/marzban.sh)" @ install
```

–ö–æ–≥–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—É–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∞:
- –í—ã —É–≤–∏–¥–∏—Ç–µ –ª–æ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –Ω–∞–∂–∞–≤ `Ctrl+C` –∏–ª–∏ –∑–∞–∫—Ä—ã–≤ —Ç–µ—Ä–º–∏–Ω–∞–ª.
- –§–∞–π–ª—ã Marzban –±—É–¥—É—Ç —Ä–∞–∑–º–µ—â–µ–Ω—ã –ø–æ –∞–¥—Ä–µ—Å—É `/opt/marzban`.
- –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `/opt/marzban/.env` (—Å–º. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)).
- –§–∞–π–ª—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –±—É–¥—É—Ç —Ä–∞–∑–º–µ—â–µ–Ω—ã –ø–æ –∞–¥—Ä–µ—Å—É `/var/lib/marzban`.
- –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –≤–≤–µ–¥—è –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ `http://YOUR_SERVER_IP:8000/dashboard/` (–∑–∞–º–µ–Ω–∏–≤ YOUR_SERVER_IP –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞).

–î–∞–ª–µ–µ, –í–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≥–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Marzban, –≤—ã–ø–æ–ª–Ω–∏–≤ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É: 

```bash
marzban cli admin create --sudo
```

–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –í—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—è –¥–∞–Ω–Ω—ã–µ —Å–≤–æ–µ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏.

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —Å–∫—Ä–∏–ø—Ç–∞ Marzban, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
marzban --help
```

–ï—Å–ª–∏ –í—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç, –∏—Å–ø–æ–ª—å–∑—É—è –µ–≥–æ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑–¥–µ–ª—É –Ω–∏–∂–µ
<details markdown="1">
<summary><h3>–†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞</h3></summary>

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ xray –Ω–∞ –í–∞—à —Å–µ—Ä–≤–µ—Ä.

–í—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É—è [Xray-install](https://github.com/XTLS/Xray-install):

```bash
bash -c "$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)" @ install
```

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–í–∞–º –Ω—É–∂–µ–Ω Python >= 3.8):

```bash
git clone https://github.com/Gozargah/Marzban.git
cd Marzban
wget -qO- https://bootstrap.pypa.io/get-pip.py | python3 -
python3 -m pip install -r requirements.txt
```

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [Python Virtualenv](https://pypi.org/project/virtualenv/).

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
alembic upgrade head
```

–ï—Å–ª–∏ –í—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `marzban-cli`, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–≤—è–∑–∞—Ç—å –µ–≥–æ —Å —Ñ–∞–π–ª–æ–º –≤ `$PATH`, —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:

```bash
sudo ln -s $(pwd)/marzban-cli.py /usr/bin/marzban-cli
sudo chmod +x /usr/bin/marzban-cli
marzban-cli completion install
```

–¢–µ–ø–µ—Ä—å –Ω–∞—Å—Ç–∞–ª–æ –≤—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–ø–∏—é —Ñ–∞–π–ª–∞ `.env.example`, –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –µ–≥–æ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å –ø–æ–º–æ—â—å—é —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞,–Ω–∞–ø—Ä–∏–º–µ—Ä `nano`.

–í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –∑–∞—Ö–æ—á–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

```bash
cp .env.example .env
nano .env
```

> –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª—å—à–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

–í –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã:

```bash
python3 main.py
```

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å –ø–æ–º–æ—â—å—é linux systemctl (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª marzban.service –≤ `/var/lib/marzban/marzban.service`):

```
systemctl enable /var/lib/marzban/marzban.service
systemctl start marzban
```

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å nginx:

```
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name  example.com;

    ssl_certificate      /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key  /etc/letsencrypt/live/example.com/privkey.pem;

    location ~* /(dashboard|api|docs|redoc|openapi.json) {
        proxy_pass http://0.0.0.0:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # xray-core ws-path: /
    # client ws-path: /marzban/me/2087
    #
    # All traffic is proxed through port 443, and send to the xray port(2087, 2088 etc.).
    # The '/marzban' in location regex path can changed any characters by yourself.
    #
    # /${path}/${username}/${xray-port}
    location ~* /marzban/.+/(.+)$ {
        proxy_redirect off;
        proxy_pass http://127.0.0.1:$1/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

–∏–ª–∏:

```
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name  marzban.example.com;

    ssl_certificate      /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key  /etc/letsencrypt/live/example.com/privkey.pem;

    location / {
        proxy_pass http://0.0.0.0:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∞ `http://localhost:8000/dashboard`. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ, –∏–∑–º–µ–Ω–∏–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `UVICORN_HOST` –∏ `UVICORN_PORT`.
</details>

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

> –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–æ–º–µ—Å—Ç–∏–≤ –∏—Ö –≤ —Ñ–∞–π–ª `.env`.

| –ü–µ—Ä–º–µ–Ω–Ω–∞—è                                | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                       |
| ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| SUDO_USERNAME                            | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞                                                                                       |
| SUDO_PASSWORD                            | –ü–∞—Ä–æ–ª—å –≥–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞                                                                                                 |
| SQLALCHEMY_DATABASE_URL                  | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ë–î ([SQLAlchemy's docs](https://docs.sqlalchemy.org/en/20/core/engines.html#database-urls))                       |
| UVICORN_HOST                             | –ü—Ä–∏–≤—è–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫ —Ö–æ—Å—Ç—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `0.0.0.0`)                                                                          |
| UVICORN_PORT                             | –ü—Ä–∏–≤—è–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫ –ø–æ—Ä—Ç—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `8000`)                                                                             |
| UVICORN_UDS                              | –ü—Ä–∏–≤—è–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫ UNIX domain socket                                                                                       |
| UVICORN_SSL_CERTFILE                     | –ê–¥—Ä–µ—Å —Ñ–∞–π–ª–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ SSL                                                                                                    |
| UVICORN_SSL_KEYFILE                      | –ê–¥—Ä–µ—Å —Ñ–∞–π–ª–∞ –∫–ª—é—á–∞ SSL                                                                                                          |
| XRAY_JSON                                | –ê–¥—Ä–µ—Å —Ñ–∞–π–ª–∞ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray. (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `xray_config.json`)                                                         |
| XRAY_EXECUTABLE_PATH                     | –ü—É—Ç—å –∫ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞–º Xray  (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/usr/local/bin/xray`)                                                                  |
| XRAY_ASSETS_PATH                         | –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å —Ä–µ—Å—Å—É—Ä—Å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –¥–ª—è Xray (—Ñ–∞–π–ª—ã geoip.dat –∏ geosite.dat) (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/usr/local/share/xray`)            |
| XRAY_SUBSCRIPTION_URL_PREFIX             | –ü—Ä–µ—Ñ–∏–∫—Å –∞–¥—Ä–µ—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏                                                                                                        |
| XRAY_FALLBACKS_INBOUND_TAG               | –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏, —É–∫–∞–∂–∏—Ç–µ –∑–¥–µ—Å—å –µ–≥–æ —Ç–µ–≥                             |
| XRAY_EXCLUDE_INBOUND_TAGS                | –¢–µ–≥–∏ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã –≤ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–∫—Å–∏                              |
| CUSTOM_TEMPLATES_DIRECTORY               | –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `app/templates`)                                                     |
| CLASH_SUBSCRIPTION_TEMPLATE              | –®–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Clash (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `clash/default.yml`)                                                     |
| SUBSCRIPTION_PAGE_TEMPLATE               | –®–∞–±–ª–æ–Ω –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥–ø–∏—Å–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `subscription/index.html`)                                                         |
| HOME_PAGE_TEMPLATE                       | –®–∞–±–ª–æ–Ω –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `home/index.html`)                                                                      |
| TELEGRAM_API_TOKEN                       | –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞  (–ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç [@botfather](https://t.me/botfather))                                                      |
| TELEGRAM_ADMIN_ID                        | –ß–∏—Å–ª–æ–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ Telegram (–ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç [@userinfobot](https://t.me/userinfobot))                      |
| TELEGRAM_PROXY_URL                       | URL –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Telegram-–±–æ—Ç–∞ (–µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä—ã Telegram –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ).                                   |
| JWT_ACCESS_TOKEN_EXPIRE_MINUTES          | –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö, `0` –æ–∑–Ω–∞—á–∞–µ—Ç "–±–µ–∑ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è" (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `1440`) |
| DOCS                                     | –ê–∫—Ç–∏–≤–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –ø–æ –∞–¥—Ä–µ—Å–∞–º `/docs` –∏ `/redoc`. (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `False`)                                              |
| DEBUG                                    | –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (development) (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `False`)                                                              |
| WEBHOOK_ADDRESS                          | –ê–¥—Ä–µ—Å Webhook –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è Webhook –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è, –µ—Å–ª–∏ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –±—ã–ª–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ             |
| WEBHOOK_SECRET                           | Webhook secret –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è —Å –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º –≤ –≤–∏–¥–µ `x-webhook-secret` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `None`)               |
| NUMBER_OF_RECURRENT_NOTIFICATIONS        | –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –ø–æ–ø—ã—Ç–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏  (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `3`)                                 |
| RECURRENT_NOTIFICATIONS_TIMEOUT          | –¢–∞–π–º-–∞—É—Ç –º–µ–∂–¥—É –∫–∞–∂–¥—ã–º –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `180`)                               |
| NOTIFY_REACHED_USAGE_PERCENT             | –ü—Ä–∏ –∫–∞–∫–æ–º –ø—Ä–æ—Ü–µ–Ω—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `80`)                                                |
| NOTIFY_DAYS_LEFT                         | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `3`)                                                |
| USERS_AUTODELETE_DAYS                    | Delete expired (and optionally limited users) after this many days (Negative values disable this feature, default: `-1`)       |
| USER_AUTODELETE_INCLUDE_LIMITED_ACCOUNTS | Weather to include limited accounts in the auto-delete feature (default: `False`)                                              |
| USE_CUSTOM_JSON_DEFAULT                  | Enable custom JSON config for ALL supported clients (default: `False`)                                                         |
| USE_CUSTOM_JSON_FOR_V2RAYNG              | Enable custom JSON config only for V2rayNG (default: `False`)                                                                  |
| USE_CUSTOM_JSON_FOR_STREISAND            | Enable custom JSON config only for Streisand (default: `False`)                                                                |
| USE_CUSTOM_JSON_FOR_V2RAYN               | Enable custom JSON config only for V2rayN (default: `False`)                                                                   |

# API

Marzban –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ Marzban. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ API –≤ Swagger UI –∏–ª–∏ ReDoc —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ  –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DOCS=True` –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–∞–º `/docs` –∏ `/redoc`.

# Backup

–í—Å–µ–≥–¥–∞ –ø–æ–ª–µ–∑–Ω–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Ñ–∞–π–ª–æ–≤ Marzban, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø–æ—Ç–µ—Ä—é –¥–∞–Ω–Ω—ã—Ö –≤ —Å–ª—É—á–∞–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–±–æ–µ–≤ –∏–ª–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã —à–∞–≥–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ Marzban:

1. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã Marzban —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ `/var/lib/marzban` (–≤ –≤–µ—Ä—Å–∏—è—Ö Docker). –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥ `/var/lib/marzban` –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –≤–∞–º–∏ –º–µ—Å—Ç–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫ –∏–ª–∏ –≤ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.
2. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –Ω–µ –∑–∞–±—É–¥—å—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ñ–∞–π–ª–∞ env, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray. –ï—Å–ª–∏ –≤—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏ Marzban —Å –ø–æ–º–æ—â—å—é marzban-scripts (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ), —Ç–æ env –∏ –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `/opt/marzban/`.

–í—ã–ø–æ–ª–Ω–∏–≤ —ç—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è, –≤—ã —Å–º–æ–∂–µ—Ç–µ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö Marzban, –∞ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Ö –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å. –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏—Ö –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

# Telegram Bot

Marzban –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –±–æ—Ç–æ–º Telegram, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ—Ä–≤–µ—Ä–æ–º, —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ —Ç–∞–∫–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. –≠—Ç–æ—Ç –±–æ—Ç –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –≤–∫–ª—é—á–∏—Ç—å, –≤—ã–ø–æ–ª–Ω–∏–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–æ–≤, –∏ –æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Marzban –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å Telegram-–±–æ—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `TELEGRAM_API_TOKEN` –≤ –∫–∞—á–µ—Å—Ç–≤–µ API-—Ç–æ–∫–µ–Ω–∞ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞.
2. —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `TELEGRAM_ADMIN_ID` –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ ID –≤–∞—à–µ–≥–æ Telegram-–∞–∫–∫–∞—É–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç [@userinfobot](https://t.me/userinfobot)

# Marzban CLI

Marzban –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º CLI –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º `marzban-cli`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –Ω–∞–ø—Ä—è–º—É—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –Ω–∏–º.

–ï—Å–ª–∏ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ Marzban —Å –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏, —Ç–æ –¥–æ—Å—Ç—É–ø –∫ –∫–æ–º–∞–Ω–¥–∞–º cli –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É:

```bash
marzban cli [OPTIONS] COMMAND [ARGS]...
```

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –ø–æ Marzban CLI](./cli/README.md).

# Marzban Node

–ü—Ä–æ–µ–∫—Ç Marzban –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç [Marzban-node](https://github.com/gozargah/marzban-node), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –í–∞–º –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –° –ø–æ–º–æ—â—å—é Marzban-node –º–æ–∂–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —É–∑–ª–∞–º, –ø–æ–ª—É—á–∏–≤ —Ç–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞, –∫–∞–∫ –≤—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å. Marzban-node –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–∞–º, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –∏–º –≥–∏–±–∫–æ—Å—Ç—å –≤ –≤—ã–±–æ—Ä–µ, –∞ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º.
–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Marzban-node](https://github.com/gozargah/marzban-node).


# Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å –∞–¥—Ä–µ—Å webhook, –∏ Marzban –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å.

–ó–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ –≤–∏–¥–µ POST-–∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –∞–¥—Ä–µ—Å, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ `WEBHOOK_ADDRESS`, —Å `WEBHOOK_SECRET` –≤ –∫–∞—á–µ—Å—Ç–≤–µ `x-webhook-secret` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ Marzban:

```
Headers:
Host: 0.0.0.0:9000
User-Agent: python-requests/2.28.1
Accept-Encoding: gzip, deflate
Accept: */*
Connection: keep-alive
x-webhook-secret: something-very-very-secret
Content-Length: 107
Content-Type: application/json



Body:
{"username": "marzban_test_user", "action": "user_updated", "enqueued_at": 1680506457.636369, "tries": 0}
```

–†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π: `user_created`, `user_updated`, `user_deleted`, `user_limited`, `user_expired`, `user_disabled`, `user_enabled`

# –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ Marzban –ø–æ–ª–µ–∑–Ω—ã–º –∏ —Ö–æ—Ç–µ–ª–∏ –±—ã –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏–µ, –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ –≤ –æ–¥–Ω–æ–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö —Å–µ—Ç–µ–π:

- TRON network (TRC20): `TX8kJoDcowQPBFTYHAJR36GyoUKP1Xwzkb`
- ETH, BNB, MATIC network (ERC20, BEP20): `0xFdc9ad32454FA4fc4733270FCc12ddBFb68b83F7`
- Bitcoin network: `bc1qpys2nefgsjjgae3g3gqy9crsv3h3rm96tlkz0v`
- Dogecoin network: `DJAocBAu8y6LwhDKUktLAyzV8xyoFeHH6R`
- TON network: `EQAVf-7hAXHlF-jmrKE44oBwN7HGQFVBLAtrOsev5K4qR4P8`

–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É!

# –õ–∏—Ü–µ–Ω–∑–∏—è

–°–¥–µ–ª–∞–Ω–æ –≤ [Unknown!] –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –ø–æ–¥ [AGPL-3.0](./LICENSE).

# –£—á–∞—Å—Ç–Ω–∏–∫–∏

–ú—ã ‚ù§Ô∏è‚Äçüî• —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞! –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∞—à–∏–º [Contributing Guidelines](CONTRIBUTING.md) –∏ –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏–ª–∏ —Å–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ. –ú—ã —Ç–∞–∫–∂–µ –ø—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–∞—Å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –Ω–∞—à–µ–π –≥—Ä—É–ø–ø–µ [Telegram](https://t.me/gozargah_marzban) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ [open issues](https://github.com/gozargah/marzban/issues), —á—Ç–æ–±—ã –ø–æ–º–æ—á—å —Ä–∞–∑–≤–∏—Ç–∏—é —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

<p align="center">
–°–ø–∞—Å–∏–±–æ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä—ã–º Marzban —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª—É—á—à–µ:
</p>
<p align="center">
<a href="https://github.com/Gozargah/Marzban/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=Gozargah/Marzban" />
</a>
</p>
<p align="center">
  Made with <a rel="noopener noreferrer" target="_blank" href="https://contrib.rocks">contrib.rocks</a>
</p>
