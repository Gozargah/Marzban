<p align="center">
  <a href="https://github.com/gozargah/marzban" target="_blank" rel="noopener noreferrer">
    <picture>
      <source media="(prefers-color-scheme: dark)" srcset="https://github.com/Gozargah/Marzban-docs/raw/master/screenshots/logo-dark.png">
      <img width="160" height="160" src="https://github.com/Gozargah/Marzban-docs/raw/master/screenshots/logo-light.png">
    </picture>
  </a>
</p>

<h1 align="center"/>ูุฑุฒุจุงู</h1>

<p align="center">
     ุฑุงู ุญู ฺฉูพุงุฑฺู ุจุฑุง ูุฏุฑุช ูพุฑูุชฺฉู ูุง ูุฎุชูู. ูุฏุฑุช ฺฏุฑูุชู ุงุฒ <a href="https://github.com/XTLS/Xray-core">Xray</a>
</p>

<br/>
<p align="center">
    <a href="#">
        <img src="https://img.shields.io/github/actions/workflow/status/gozargah/marzban/build.yml?style=flat-square" />
    </a>
    <a href="https://hub.docker.com/r/gozargah/marzban" target="_blank">
        <img src="https://img.shields.io/docker/pulls/gozargah/marzban?style=flat-square&logo=docker" />
    </a>
    <a href="#">
        <img src="https://img.shields.io/github/license/gozargah/marzban?style=flat-square" />
    </a>
    <a href="https://t.me/gozargah_marzban" target="_blank">
        <img src="https://img.shields.io/badge/telegram-group-blue?style=flat-square&logo=telegram" />
    </a>
    <a href="#">
        <img src="https://img.shields.io/badge/twitter-commiunity-blue?style=flat-square&logo=twitter" />
    </a>
    <a href="#">
        <img src="https://img.shields.io/github/stars/gozargah/marzban?style=social" />
    </a>
</p>

<p align="center">
	<a href="./README.md">
	English
	</a>
	/
	<a href="./README-fa.md">
	ูุงุฑุณ
	</a>
</p>

<p align="center">
  <a href="httpps://github.com/gozargah/marzban" target="_blank" rel="noopener noreferrer" >
    <img src="https://github.com/Gozargah/Marzban-docs/raw/master/screenshots/preview.png" alt="Elk screenshots" width="600" height="auto">
  </a>
</p>

## ุจุฑุฑุณ ุงุฌูุงู

ูุฑุฒุจุงู ฺฉ ูุฑู ุงูุฒุงุฑ (ูุจ ุงูพูฺฉุดู) ูุฏุฑุช ูพุฑูฺฉุณ ุงุณุช ฺฉู ุงูฺฉุงู ูุฏุฑุช ฺูุฏ ุตุฏ ุญุณุงุจ ูพุฑูฺฉุณ ุฑุง ุจุง ูุฏุฑุช ู ุฏุณุชุฑุณ ุจุงูุง ูุฑุงูู ูฺฉูุฏ. ูุฑุฒุจุงู ุงุฒ [Xray-core](https://github.com/XTLS/Xray-core) ูุฏุฑุช ฺฏุฑูุชู ู ุจุง Python ู React ูพุงุฏู ุณุงุฒ ุดุฏู ุงุณุช.

## ฺุฑุง ูุฑุฒุจุงูุ

ูุฑุฒุจุงู ุฏุงุฑุง ฺฉ ุฑุงุจุท ฺฉุงุฑุจุฑ ุณุงุฏู ุงุณุช ฺฉู ูุงุจูุช ูุง ุฒุงุฏ ุฏุงุฑุฏ. ูุฑุฒุจุงู ุงูฺฉุงู ุงุฌุงุฏ ฺูุฏ ููุน ูพุฑูฺฉุณ ุจุฑุง ฺฉุงุฑุจุฑ ูุง ุฑุง ูุฑุงูู ูฺฉูุฏ ุจุฏูู ุงูฺฉู ุจู ุชูุธูุงุช ูพฺุฏู ุง ูุงุฒ ุฏุงุดุชู ุจุงุดุฏ. ุจู ฺฉูฺฉ ุฑุงุจุท ฺฉุงุฑุจุฑ ุชุญุช ูุจ ูุฑุฒุจุงูุ ุดูุง ูุชูุงูุฏ ฺฉุงุฑุจุฑุงู ุฑุง ูุงูุชูุฑุ ูุฑุงุด ู ุฏุฑ ุตูุฑุช ูุงุฒุ ูุญุฏูุฏ ฺฉูุฏ.

### ุงูฺฉุงูุงุช

- **ุฑุงุจุท ฺฉุงุฑุจุฑ ุชุญุช ูุจ** ุขูุงุฏู

- ุจู ุตูุฑุช **REST API** ูพุงุฏู ุณุงุฒ ุดุฏู

- ูพุดุชุจุงู ุงุฒ ูพุฑูุชฺฉู ูุง **Vmess**, **VLESS**, **Trojan** ู **Shadowsocks**

- ุงูฺฉุงู ูุนุงูุณุงุฒ **ฺูุฏู ูพุฑูุชฺฉู** ุจุฑุง ูุฑ ูุฒุฑ

- ุงูฺฉุงู ุณุงุฎุช **ฺูุฏู ฺฉุงุฑุจุฑ** ุจุฑ ุฑู ฺฉ inbound

- ูพุดุชุจุงู ุงุฒ **ฺูุฏู inbound** ุจุฑ ุฑู **ฺฉ port** (ุจู ฺฉูฺฉ fallbacks)

- ูุญุฏูุฏุช ุจุฑ ุงุณุงุณ ูุตุฑู ุชุฑุงูฺฉ ู ุชุงุฑุฎ ุงููุถุง

- ูพุดุชุจุงู ุงุฒ **Subscription link** ุณุงุฒฺฏุงุฑ ุจุง **V2ray** _(ูุซู ูุฑู ุงูุฒุงุฑ ูุง V2RayNG, OneClick, Nekoray ู...)_ ู **Clash**

- ุณุงุฎุช **ููฺฉ ุงุดุชุฑุงฺฉ ฺฏุฐุงุฑ** ู **QRcode** ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ

- ูุงูุชูุฑูฺฏ ููุงุจุน ุณุฑูุฑ ู **ูุตุฑู ุชุฑุงูฺฉ**

- ูพุดุชุจุงู ุงุฒ ุชูุธูุงุช xray

- ูพุดุชุจุงู ุงุฒ **TLS**

- **ุฑุจุงุช ุชูฺฏุฑุงู**

- ูุงุจูุช ุงุฌุงุฏ **ฺูุฏู ูุฏุฑ** (ุชฺฉูู ูุดุฏู ุงุณุช)

# ุฑุงูููุง ูุตุจ

> ูุง ุจู ุดุฏุช ูพุดููุงุฏ ูฺฉูู ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ุงุจุนุงุฏ ุจุฒุฑฺฏ (production) ุงุฒ Docker image ูุฑุฒุจุงู ุงุณุชูุงุฏู ฺฉูุฏ. ุฏุฑ ุงูุตูุฑุช ุจุฑุง ุงุฑุชูุง ุจู ูุณุฎู ูุง ุจุนุฏ ุฑุงุญุชุชุฑ ุฎูุงูุฏ ุจูุฏ ู ูุทูุฆู ุชุฑ ุงุณุช.

## ูุตุจ ุจู ฺฉูฺฉ Docker

ฺูุฏู ุงุณุชุฑุงุชฺ ุจุฑ ุงุณุงุณ ูุงุฒ ูุง ูุฎุชูู ุขูุงุฏู ุดุฏู ุงุณุช. ุจุฑุง ุงุฌุฑุง ูุฑุฒุจุงู ุจู ฺฉูฺฉ Docker [ูุทูุง ุงู ูุทูุจ ุฑุง ูุทุงูุนู ฺฉูุฏ](https://github.com/Gozargah/Marzban-examples).

## ูุตุจ ุจู ุตูุฑุช ุฏุณุช

ูุทูุง xray ุฑุง ูุตุจ ฺฉูุฏ.
ุดูุง ูุชูุงูุฏ ุจู ฺฉูฺฉ [Xray-install](https://github.com/XTLS/Xray-install) ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ุฏูุฏ.

```bash
bash -c "$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)" @ install
```

ูพุฑูฺู ุฑุง clone ฺฉูุฏ ู dependency ูุง ุฑุง ูุตุจ ฺฉูุฏ. ุฏูุช ฺฉูุฏ ฺฉู ูุณุฎู ูพุงุชูู ุดูุง Python>=3.8 ุจุงุดุฏ.

```bash
git clone https://github.com/Gozargah/Marzban.git
cd Marzban
wget -qO- https://bootstrap.pypa.io/get-pip.py | python3 -
python3 -m pip install -r requirements.txt
```

ููฺูู ูุชูุงูุฏ ุงุฒ , [Python Virtualenv](https://pypi.org/project/virtualenv/) ูู ุงุณุชูุงุฏู ฺฉูุฏ.

ุณูพุณ ฺฉุงููุฏ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ ุชุง ุฏุชุงุจุณ ุชูุธู ุดูุฏ.

```bash
alembic upgrade head
```

ุญุงูุง ฺฉ ฺฉูพ ุงุฒ `.env.example` ุจุง ูุงู `.env` ุจุณุงุฒุฏ ู ุจุง ฺฉ ุงุฏุชูุฑ ุขู ุฑุง ุจุงุฒ ฺฉูุฏ ู ุชูุธูุงุช ุฏูุฎูุงู ุฎูุฏ ุฑุง ุงูุฌุงู ุฏูุฏ. ู ุนููุงู ูุซุงู ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ ุฑุง ูุชูุงูุฏ ุฏุฑ ุงู ูุงู ุชุบุฑ ุฏูุฏ.

```bash
cp .env.example .env
nano .env
```

> ุจุฑุง ุงุทูุงุนุงุช ุจุดุชุฑ ุจุฎุด [ุชูุธูุงุช](#ุชูุธูุงุช) ุฑุง ูุทุงูุนู ฺฉูุฏ.

ุฏุฑ ุงูุชูุง, ูุฑุฒุจุงู ุฑุง ุจู ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ุงุฌุฑุง ฺฉูุฏ.

```bash
python3 main.py
```

ุจู ุตูุฑุช ูพุดูุฑุถ ูุฑุฒุจุงู ุฏุฑ ุขุฏุฑุณ `http://localhost:8000/dashboard` ุงุฌุฑุง ูุดูุฏ. ุดูุง ูุชูุงูุฏ ุจุง ุชุบุฑ `UVICORN_HOST` ู `UVICORN_PORT`ุ ูุงุณุช ู ูพูุฑุช ุฑุง ุชุบุฑ ุฏูุฏ.

## ุชูุธูุงุช

> ูุชุบุฑ ูุง ุฒุฑ ุฏุฑ ูุงู `.env` ุงุณุชูุงุฏู ูุดููุฏ. ุดูุง ู ุชูุงูุฏ ุจุง ุชุนุฑู ู ุชุบุฑ ุขู ูุงุ ุชูุธูุงุช ูุฑุฒุจุงู ุฑุง ุชุบุฑ ุฏูุฏ.

|                                                                                                                 ุชูุถุญุงุช |              ูุชุบุฑ              |
| ----------------------------------------------------------------------------------------------------------------------: | :-----------------------------: |
|                                                                                      ูุงู ฺฉุงุฑุจุฑ ูุฏุฑ ฺฉู (ูพุดูุฑุถ: admin) |          SUDO_USERNAME          |
|                                                                                        ุฑูุฒ ุนุจูุฑ ูุฏุฑ ฺฉู (ูพุดูุฑุถ: admin) |          SUDO_PASSWORD          |
|          ุขุฏุฑุณ ุฏุชุงุจุณ ([ุจุฑ ุงุณุงุณ ูุณุชูุฏุงุช SQLAlchemy](https://docs.sqlalchemy.org/en/20/core/engines.html#database-urls)) |     SQLALCHEMY_DATABASE_URL     |
|                                                              ุขุฏุฑุณ ูุงุณุช ฺฉู ูุฑุฒุจุงู ุฑู ุขู ุงุฌุฑุง ูุดูุฏ (ูพุดูุฑุถ: `0.0.0.0`) |          UVICORN_HOST           |
|                                                                      ูพูุฑุช ฺฉู ูุฑุฒุจุงู ุฑู ุขู ุงุฌุฑุง ูุดูุฏ (ูพุดูุฑุถ: `8000`) |          UVICORN_PORT           |
|                                                                               ุงุฌุฑุง ูุฑุฒุจุงู ุจุฑ ุฑู ฺฉ Unix domain socket |           UVICORN_UDS           |
|                                                                              ุขุฏุฑุณ ฺฏูุงู SSL ุจู ุฌูุช ุงูู ฺฉุฑุฏู ูพูู ูุฑุฒุจุงู |      UVICORN_SSL_CERTFILE       |
|                                                                                                     ุขุฏุฑุณ ฺฉูุฏ ฺฏูุงู SSL |       UVICORN_SSL_KEYFILE       |
|                              ุขุฏุฑุณ ูุงุณุช ูุง Xray ูุฑฺฉุฏุงู ุฏุฑ ฺฉ ุฎุท. ุจุง ูุฑูุช `remark@hostname` (ูพุดูุฑุถ: `๐ Marz@SERVER_IP`) |           XRAY_HOSTS            |
|                                                                       ูุณุฑ ูุงู json ุชูุธูุงุช xray (ูพุดูุฑุถ: `xray.json`) |            XRAY_JSON            |
|                                                                        ูุณุฑ ุจุงูุฑ xray (ูพุดูุฑุถ: `/usr/local/bin/xray`) |      XRAY_EXECUTABLE_PATH       |
|                                                                   ูุณุฑ asset ูุง xray (ูพุดูุฑุถ: `/usr/local/share/xray`) |        XRAY_ASSETS_PATH         |
| ูพุดููุฏ (ุง ูุงุณุช) ุขุฏุฑุณ ูุง ุงุดุชุฑุงฺฉ (ุฒูุงู ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏ ฺฉู ูุงุฒ ุฏุงุฑุฏ ุฏุงููู subscription link ูุง ุจุง ุฏุงููู ูพูู ูุชูุงูุช ุจุงุดุฏ) |  XRAY_SUBSCRIPTION_URL_PREFIX   |
|                                                                        ุชฺฏ inboundุง ฺฉู ุจู ุนููุงู fallback ุงุณุชูุงุฏู ูุดูุฏ. |    XRAY_FALLBACK_INBOUND_TAG    |
|                                                ุชฺฏ ูุง inbound ุง ฺฉู ูุงุฒู ูุณุช ุฏุฑ ฺฉุงููฺฏ ูุง ุณุงุฎุชู ุดุฏู ูุฌูุฏ ุฏุงุดุชู ุจุงุดูุฏ. |    XRAY_EXCLUDE_INBOUND_TAGS    |
|                                                       ุชูฺฉู ุฑุจุงุช ุชูฺฏุฑุงู (ุฏุฑุงูุช ุงุฒ [@botfather](https://t.me/botfather)) |       TELEGRAM_API_TOKEN        |
|                                          ุขุฏ ุนุฏุฏ ุงุฏูู ุฏุฑ ุชูฺฏุฑุงู (ุฏุฑุงูุช ุงุฒ [@userinfobot](https://t.me/userinfobot)) |        TELEGRAM_ADMIN_ID        |
|                                                                                               ุงุฌุฑุง ุฑุจุงุช ุงุฒ ุทุฑู ูพุฑูฺฉุณ |       TELEGRAM_PROXY_URL        |
|                            ูุฏุช ุฒูุงู ุงููุถุง ุชูฺฉู ุฏุณุชุฑุณ ุจู ูพูู ูุฑุฒุจุงู, `0` ุจู ูุนูุง ุจุฏูู ุชุงุฑุฎ ุงููุถุง ุงุณุช (ูพุดูุฑุถ: `1440`) | JWT_ACCESS_TOKEN_EXPIRE_MINUTES |
|                                                       ูุนุงู ุณุงุฒ ุฏุงฺฉูููุชุดู ุจู ุขุฏุฑุณ `/docs` ู `/redoc`(ูพุดูุฑุถ: `False`) |              DOCS               |
|                                                                     ูุนุงูุณุงุฒ ุญุงูุช ุชูุณุนู (development) (ูพุดูุฑุถ: `False`) |              DEBUG              |


## ุฑุจุงุช ุชูฺฏุฑุงู
ูุฑุฒุจุงู ุฏุงุฑุง ฺฉ ุฑุจุงุช ุชูฺฏุฑุงู ุงุณุช ฺฉู ุดูุง ุจุง ูุนุงู ุณุงุฒ ุขูุ ูุชูุงูุฏ ุณุฑูุฑ ุฑุง ูุฏุฑุช ู ุงุนูุงู ูุง ุฑุง ุฏุฑ ุชูฺฏุฑุงู ุฏุฑุงูุช ฺฉูุฏ.
> ูุชุบุฑ ูุง `TELEGRAM_API_TOKEN` ู `TELEGRAM_ADMIN_ID` ุฑุง ุฏุฑ ุจุฎุด [ุชูุธูุงุช](#ุชูุธูุงุช) ุจุฑุฑุณ ฺฉูุฏ.

### ุดูุง ู ูุฑุฒุจุงู

ูุทูุง ุงฺฏุฑ ุงูฺฉุงูุด ุฑู ุฏุงุฑุฏุ ุจุง ุจุฑุฑุณ [ูุณุช ฺฉุงุฑ ูุง](https://github.com/gozargah/marzban/issues) ุจู ูุง ุฏุฑ ุจูุจูุฏ ูุฑุฒุจุงู ฺฉูฺฉ ฺฉูุฏ. ฺฉูฺฉ ูุง ุดูุง ุจุง ุขุบูุด ุจุงุฒ ูพุฐุฑูุชู ูุดู.

ูุทูุง [ุงุฏู ูุง ุฎูุฏุชูู](https://github.com/Gozargah/Marzban/issues/new?assignees=&labels=enhancement&template=feature_request.md&title=Feature+title) ุฑู ุจุง ูุง ุจู ุงุดุชุฑุงฺฉ ุจุฐุงุฑุฏ ุชุง ุฏุฑ ุงุณุฑุน ููุช ูพุงุฏู ุณุงุฒ ุจุดู.

ุงฺฏุฑ ุจู ูุฑ ููุน ุงู ูพุฑูฺู ุจู ุดูุง ฺฉูฺฉ ฺฉุฑุฏู ุงุณุชุ ูุง ุฎูุดุญุงู ูุดู ุงุฒ ุทุฑู [ุญูุงุช ูุงู](https://opencollective.com/marzban)ุ ูุง ุฑู ุฏุฑ ูุณุฑ ุชูุณุนู ูุฑุฒุจุงู ููุฑุงู ฺฉูุฏ.

## ูุงุณูุณ

ุชูุณุนู ุงูุชู ุดุฏู ุฏุฑ [ูุงุดูุงุณ!] ู ููุชุดุฑ ุดุฏู ุชุญุช ูุงุณูุณ [AGPL-3.0](./LICENSE).
